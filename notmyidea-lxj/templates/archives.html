{% extends "base.html" %}
{% block content %}
<section id="content" class="body">
<h1>Archives for {{ SITENAME }}</h1>

<h2>Search</h2>
<script>
  (function() {
  var cx = '016374522709017827858:csiwduyrdss';
  var gcse = document.createElement('script');
  gcse.type = 'text/javascript';
  gcse.async = true;
  gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
  var s = document.getElementsByTagName('script')[0];
  s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:searchbox-only></gcse:searchbox-only>


<p>
<h2>Archives by year</h2>

{% for year, numposts in articles|groupby('date.year') %}
 <li><a href="{{ SITEURL }}/archives/{{ year }}/period_archives.html">{{ year }} ({{ numposts|count }})</a></li>
{% endfor %}
</p>

<p>
<h2>Archives by tag</h2>

{% for tag, articles in tags %}
  <li><a href="{{ SITEURL }}/tag/{{ tag }}.html">{{ tag }} ({{ articles|count }})</a></li>
{% endfor %}
</p>
<!--{# based on http://stackoverflow.com/questions/12764291/jinja2-group-by-month-year #}

{% for year, year_group in dates|groupby('date.year')|reverse %}
  {% for month, month_group in year_group|groupby('date.month')|reverse %}
    <h4 class="date">{{ (month_group|first).date|strftime('%b %Y') }}</h4>
    <div class="post archives">
       <ul>
          {% for article in month_group %}
            <li><a href="{{ SITEURL }}/{{ article.url }}">{{ article.title }}</a></li>
          {% endfor %}
       </ul>
    </div>
  {% endfor %}
{% endfor %}-->
</section>
{% endblock %}
